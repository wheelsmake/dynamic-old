(()=>{"use strict";function e(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t}function t(e,t,n,r){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`)}function n(e){throw new Error(e)}function r(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function i(e,t){for(;"HTML"!=e.tagName;)if((e=e.parentNode)===t)return!0;return!1}function o(e){""!==e&&"string"==typeof e||t("HTML","string",e);const n=document.createElement("div");return n.innerHTML=e,s(n)}function s(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t}function a(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let i=0;i<r.length;i++)n.insertBefore(r[i],e);return!0===t&&e.remove(),r}function l(e,t,r,i,s){null===t.parentElement&&n("cannot render by '<html>' element, since it's root of document.");var a=[];if("string"==typeof e)a=o(e);else if(e instanceof Element||e instanceof Node)a[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let n=0;n<e.length;n++)a[n]=e.item(n).cloneNode(!0);else a=e;const l=[...a].reverse(),f=t.parentElement;if(!0===i)for(let n=0;n<a.length;n++)t.append(a[n]);else if(!1===i)for(let n=0;n<l.length;n++)t.prepend(l[n]);else if(!0===r)if(t.nextSibling)for(let n=0;n<l.length;n++)f.insertBefore(l[n],t.nextSibling);else for(let n=0;n<l.length;n++)f.append(l[n]);else if(!1===r)for(let n=0;n<a.length;n++)f.insertBefore(a[n],t);else for(let n=0;n<a.length;n++)t.append(a[n]);return a}function f(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&n(`The specified tuID is one of the preserved element names: ${e}. See https://html.spec.whatwg.org/#valid-custom-element-name for help.`),t}function h(){return`${e(11)}-${e(17)}`}var c,d,u,m,p,w,g,v,b=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},y=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class E{constructor(e){c.set(this,void 0),d.set(this,[]),u.set(this,[]),m.set(this,void 0),p.set(this,((e,t)=>{const n=r("slot",e);for(let r in t)t[r]===undefined&&delete t[r];if(t!==undefined&&0!=n.length)for(let r=0;r<n.length;r++){const e=n[r].getAttribute("name"),i=""===n[r].getAttribute("html");if(null!==e&&""!==e)for(let o in t)if(o===e){const e=t[o];i?n[r].innerHTML=e:n[r].innerText=e}}if(0!=n.length)for(let r=0;r<n.length;r++){const e=n[r].parentElement;a(n[r],!0),e.normalize()}})),w.set(this,(e=>{for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].id===e)return y(this,d,"f")[t];return null})),g.set(this,((e,t)=>{for(let i=0;i<e.length;i++)for(let t=0;t<e[i].addedNodes.length;t++){const o=e[i].addedNodes[t];if(!(o instanceof Element))return;if(o instanceof HTMLTemplateElement&&y(this,v,"f").call(this,o),this.getContent(o.tagName.toLowerCase())){var n=[];for(let e=0;e<o.childNodes.length;e++){const t=o.childNodes[e];t instanceof Element&&"SLOT"===t.tagName&&n.push(t)}var r={};for(let e=0;e<n.length;e++){const t=n[e].getAttribute("name");null!==t&&""!==t&&(r[t]=n[e].innerHTML)}o.innerHTML="",this.render({tuID:o.tagName.toLowerCase(),element:o,slots:r}),a(o,!0)}}})),v.set(this,(e=>{const t=e=>{if(null===e.getAttribute("nodynamic")){var t=e.getAttribute("tuid");t&&f(t)||(t=h());const n=document.createElement("div"),r=s(e.content);for(let e=0;e<r.length;e++)n.appendChild(r[e]);null!==e.getAttribute("dynamic")&&e.remove(),this.register({element:n,tuID:t,remove:!0})}};if(e===undefined){const e=document.querySelectorAll("template");for(let n=0;n<e.length;n++)t(e[n])}else t(e)})),b(this,c,e,"f"),y(this,v,"f").call(this),b(this,m,new MutationObserver(y(this,g,"f")),"f"),y(this,m,"f").observe(document.body,{childList:!0,subtree:!0})}register(e){for(e.tuID===undefined||f(e.tuID)?e.tuID===undefined&&(e.tuID=h()):t("tuID","string with some limitations",`${e.tuID}, read the documentation for help`);this.existsTUID(e.tuID);)y(this,c,"f")&&!0===y(this,c,"f").enableAntiClash?y(this,c,"f").clashHandler!==undefined?e.tuID=y(this,c,"f").clashHandler("tuID",e,y(this,w,"f").call(this,e.tuID)):t("options.clashHandler","Function",y(this,c,"f").clashHandler):t("tuID","non-repetitive string",e.tuID);const n={id:e.tuID,content:e.element.cloneNode(!0)};return y(this,d,"f").push(n),!0===e.remove&&e.element.remove(),e.tuID}render(e){for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].id===e.tuID){const r=y(this,d,"f")[t].content.cloneNode(!0);r instanceof Element&&y(this,p,"f").call(this,r,e.slots);var n=[];return!0===e.removeOuterElement?n=s(r):n[0]=r,l(n,e.element,e.insertAfter,e.append,e.disableDF)}t("tuID","valid ID that exists",e.tuID)}update(e){for(let n=0;n<y(this,d,"f").length;n++)if(y(this,d,"f")[n].id===e.tuID){if(e.element instanceof Element){const t=y(this,d,"f")[n].content;return y(this,d,"f")[n].content=e.element,t}t("element","Element",e.element)}return null}"delete"(e){for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].id===e){let e=y(this,d,"f")[t].content;return y(this,d,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].id===e)return y(this,d,"f")[t].content;return null}existsTUID(e){for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].id===e)return!0;return!1}existsElement(e){for(let t=0;t<y(this,d,"f").length;t++)if(y(this,d,"f")[t].content.isEqualNode(e))return y(this,d,"f")[t].id;return null}getTemplates(){return y(this,d,"f")}getInstance(e){}}c=new WeakMap,d=new WeakMap,u=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,g=new WeakMap,v=new WeakMap;var T,D,M,I,N,k,L=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},A=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class C{constructor(e){T.set(this,void 0),D.set(this,[]),M.set(this,[]),I.set(this,void 0),N.set(this,(e=>{})),k.set(this,((e,t)=>{})),L(this,T,e,"f"),L(this,I,new MutationObserver(A(this,k,"f")),"f"),A(this,I,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(e){for(let r=0;r<A(this,D,"f").length;r++)if(i(e,A(this,D,"f")[r])||e===A(this,D,"f")[r])return;for(let r=0;r<A(this,D,"f").length;r++)i(A(this,D,"f")[r],e)&&(t=A(this,D,"f")[r],-1!==(n=A(this,D,"f")).indexOf(t)&&n.splice(n.indexOf(t),1));var t,n;A(this,D,"f").push(e),A(this,N,"f").call(this,e)}getScopes(){return A(this,D,"f")}deleteScope(e){return e instanceof Element&&-1==(e=A(this,D,"f").indexOf(e))?null:A(this,D,"f").splice(e,1)[0]}createDataNode(e){}createExportDataNode(){}connect(e,t){}}T=new WeakMap,D=new WeakMap,M=new WeakMap,I=new WeakMap,N=new WeakMap,k=new WeakMap;var P,W=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},H=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class x{constructor(e){P.set(this,void 0),W(this,P,e,"f"),this.template=new E(H(this,P,"f")),this.dataFlow=new C(H(this,P,"f"))}getOptions(){return H(this,P,"f")}render(e){return l(e.HTML,e.element,e.insertAfter,e.append,e.disableDF)}repeat(e){return function(e,n){("number"!=typeof n||n<1)&&t("count","number smaller than 1",n);var r=[];return r[n-1]=" ",r.fill(e,0,n)}(e.item,e.count)}e(e,t){return r(e,t)}toHTML(e){return o(e)}hatch(e){return a(e.element,e.remove)}compose(){}n(e){return this.dataFlow.createDataNode(e)}}P=new WeakMap,function O(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&O(e[Object.keys(e)[t]])}(x),window.Dynamic=x})();
//# sourceMappingURL=dynamic.min.js.map