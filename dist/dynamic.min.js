(()=>{"use strict";function e(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function t(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)[0]}function n(e,t,n,o){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${o?`, reason: ${o}`:""}${n?`, got ${n}`:""}.`)}function o(e){throw new Error(e)}function r(e,t){const r="args",s="DNCreateArgs",i=" is invalid";if("name"in t)if("methods"in t&&"object"!=typeof t.methods)n(r,s,t,`args.methods${i}`);else switch(e){case"s":if("fetch"in t&&"function"==typeof t.fetch)break;n(r,`s${s}`,t,`args.fetch${i}`);case"t":!("isCached"in t)||!0!==t.isCached||"frequency"in t&&"number"==typeof t.frequency||n(r,`t${s}`,t,`args.frequency${i}`);break;case"e":"export"in t&&"function"==typeof t["export"]||n(r,`e${s}`,t,`args.export${i}`);break;default:o("?")}else n(r,s,t,`args.name${i}`)}function s(e,t,r){const s=a(e,r);-1!=e[1].indexOf(s)?o("Source datanodes cannot be connected."):-1!=t.nexts.indexOf(s)?n("target",undefined,r,"duplicated next nodes"):(t.nexts.push(s),s.prevs.push(t))}function i(e,r,s){const i=a(e,s);-1!=e[1].indexOf(i)?o("Source datanodes cannot be connected, thus wont be disconnected."):-1==r.nexts.indexOf(i)?n("target",undefined,s,"cannot find it as next nodes"):(t(i,r.nexts),t(r,i.prevs))}function c(e,t,n){a(e,n);return!1}function f(e,t,n){a(e,n);return!1}function a(e,t){if("object"==typeof t){if(-1!=e[0].indexOf(t))return t;n("target",undefined,t,"cannot find this datanode")}else if("string"==typeof t){for(let n=0;n<e[0].length;n++)if(e[0][n].name===t)return e[0][n];n("target",undefined,t,"cannot find this datanode")}else n("target","string | nextDN",t)}var d,u,h,l,p,m,w,g=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(e,n):r?r.value=n:t.set(e,n),n},y=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};const b="DEV"in window&&!0===window.DEV;class x{constructor(t){d.add(this),u.set(this,void 0),h.set(this,[]),l.set(this,[]),p.set(this,[]),m.set(this,[]),g(this,u,function(t){if(t instanceof Element)return t;if("string"==typeof t){const o=e(t);if(o instanceof Node)return o;n("rootNode","string | Element",t,"rootNode should be a VALID #id selector")}else n("rootNode","string | Element",t,"rootNode should be a #id selector or an Element")}(t),"f"),y(this,d,"m",w).call(this,y(this,u,"f"))}get rootNode(){return y(this,u,"f")}__DEV__getPrivateFields__(){if(b)return{rootNode:y(this,u,"f"),sourceDNs:y(this,h,"f"),transDNs:y(this,l,"f"),exportDNs:y(this,p,"f"),DNs:y(this,m,"f")}}sourceDN(e){const t=y(this,m,"f"),o=y(this,h,"f"),c=y(this,l,"f"),a=y(this,p,"f");var d;if("object"==typeof e){const n=function(e){r("s",e)}(e);o.push(n),t.push(n),d=n}else for(let n=0;n<o.length;n++)o[n].name===e&&(d=o[n]);return{connectTo:e=>s([t,o,c,a],d,e),disconnectTo:e=>i([t,o,c,a],d,e),existsNext:e=>f([t,o,c,a],0,e),get frequency(){return d.frequency},set frequency(e){"number"!=typeof e?n("frequency","number",e):d.frequency=e},get value(){if(b)return d.value}}}transDN(e){const t=y(this,m,"f"),n=y(this,h,"f"),o=y(this,l,"f"),a=y(this,p,"f");var d;if("object"==typeof e){const n=function(e){r("t",e)}(e);o.push(n),t.push(n),d=n}else for(let r=0;r<o.length;r++)o[r].name===e&&(d=o[r]);return{connectTo:e=>s([t,n,o,a],d,e),disconnectTo:e=>i([t,n,o,a],d,e),connectFrom(e){},disconnectFrom(e){},existsPrev:e=>c([t,n,o,a],0,e),existsNext:e=>f([t,n,o,a],0,e)}}exportDN(e){const t=y(this,m,"f"),n=y(this,h,"f"),o=y(this,l,"f"),s=y(this,p,"f");if("object"==typeof e){const n=function(e){r("e",e)}(e);s.push(n),t.push(n),n}else for(let r=0;r<s.length;r++)s[r].name===e&&s[r];return{connectFrom(e){},disconnectFrom(e){},existsPrev:e=>c([t,n,o,s],0,e)}}}u=new WeakMap,h=new WeakMap,l=new WeakMap,p=new WeakMap,m=new WeakMap,d=new WeakSet,w=function(e){if(e.textContent){e.textContent.match(/^__[^:]+__$/),e.textContent.match(/^--[^:]+--$/);const t=e.textContent.match(/^::[^:]+::$/);t&&this.exportDN({name:t[0].substring(2,t[0].length-2),"export"(){}})}const t=e.attributes;for(let n=0;n<t.length;n++);for(let n=0;n<e.childNodes.length;n++);},function N(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&N(e[Object.keys(e)[t]])}(x);const v=x;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:v})})();
//# sourceMappingURL=dynamic.min.js.map