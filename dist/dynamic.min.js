(()=>{"use strict";const e={E(e,t,n){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a ${t}`:"is invalid"}${n?`, received ${n}`:""}.`)},EE(e){throw new Error(e)},toHTML(e){const t=document.createElement("div");var n=[];t.innerHTML=e,""!==e&&"string"==typeof e||this.E("HTML","string",e);for(let r=0;r<t.childNodes.length;r++)n[r]=t.childNodes[r];return n},toHTMLString(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML},getInnerNodes(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t},repeat(e,t){("number"!=typeof t||t<1)&&this.E("count","number smaller than 1",t);var n=[];return n[t-1]=" ",n.fill(e,0,t)},randoma2z029(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t},checkTUID(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&this.EE(`The specified tuID is one of the preserved element names: ${e}. See https://html.spec.whatwg.org/#valid-custom-element-name for help.`),t},generateTUID(){return`${this.randoma2z029(11)}-${this.randoma2z029(17)}`},constantize(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&this.constantize(e[Object.keys(e)[t]])},render(e,t,n,r,i){null===t.parentElement&&this.EE("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=this.toHTML(e);else if(e instanceof HTMLElement||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let l=0;l<e.length;l++)o[l]=e.item(l).cloneNode(!0);else o=e;const s=[...o].reverse(),a=t.parentElement;if(!0===r)for(let l=0;l<o.length;l++)t.append(o[l]);else if(!1===r)for(let l=0;l<s.length;l++)t.prepend(s[l]);else if(!0===n)if(t.nextSibling)for(let l=0;l<s.length;l++)a.insertBefore(s[l],t.nextSibling);else for(let l=0;l<s.length;l++)a.append(s[l]);else if(!1===n)for(let l=0;l<o.length;l++)a.insertBefore(o[l],t);else for(let l=0;l<o.length;l++)t.append(o[l]);return o},generateDFID(){return`dfid-${this.randoma2z029(24)}`},checkDFID:e=>!0,hatch(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let i=0;i<r.length;i++)n.insertBefore(r[i],e);return!0===t&&e.remove(),r}};var t,n,r,i,o,s,a,l,d=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},f=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class h{constructor(s){t.add(this),n.set(this,void 0),r.set(this,[]),i.set(this,[]),o.set(this,void 0),a.set(this,((t,n)=>{for(let r=0;r<t.length;r++)for(let n=0;n<t[r].addedNodes.length;n++){const i=t[r].addedNodes[n];if(!(i instanceof HTMLElement))return;i instanceof HTMLTemplateElement&&f(this,l,"f").call(this,i),this.getContent(i.tagName.toLowerCase())&&(this.render({tuID:i.tagName.toLowerCase(),element:i}),e.hatch(i,!0))}})),l.set(this,(t=>{const n=t=>{if(null===t.getAttribute("nodynamic")){var n=t.getAttribute("tuid");n&&e.checkTUID(n)||(n=e.generateTUID());const r=document.createElement("div");for(let e=0;e<t.content.childNodes.length;e++)r.appendChild(t.content.childNodes[e].cloneNode(!0));null!==t.getAttribute("dynamic")&&t.remove(),this.register({element:r,tuID:n})}};if(t===undefined){const e=document.querySelectorAll("template");for(let t=0;t<e.length;t++)n(e[t])}else n(t)})),d(this,n,s,"f"),f(this,l,"f").call(this),d(this,o,new MutationObserver(f(this,a,"f")),"f"),f(this,o,"f").observe(document.body,{childList:!0,subtree:!0})}register(i){for(i.tuID===undefined||e.checkTUID(i.tuID)?i.tuID===undefined&&(i.tuID=e.generateTUID()):e.E("tuID","string with some limitations",`${i.tuID}, read the documentation for help`);this.existsTUID(i.tuID);)f(this,n,"f")&&!0===f(this,n,"f").enableAntiClash?f(this,n,"f").clashHandler!==undefined?i.tuID=f(this,n,"f").clashHandler("tuID",i,f(this,t,"m",s).call(this,i.tuID)):e.E("options.clashHandler","Function",f(this,n,"f").clashHandler):e.E("tuID","non-repetitive string",i.tuID);const o={id:i.tuID,content:i.element.cloneNode(!0)};return f(this,r,"f").push(o),!0===i.remove&&i.element.remove(),i.tuID}render(t){for(let i=0;i<f(this,r,"f").length;i++)if(f(this,r,"f")[i].id===t.tuID){const o=f(this,r,"f")[i].content;var n=[];return!0===t.removeOuterElement?n=e.getInnerNodes(o):n[0]=o.cloneNode(!0),e.render(n,t.element,t.insertAfter,t.append,t.disableDF)}return e.E("tuID","valid ID that exists",t.tuID),null}update(t){for(let n=0;n<f(this,r,"f").length;n++)if(f(this,r,"f")[n].id===t.tuID){if(t.element instanceof HTMLElement){const e=f(this,r,"f")[n].content;return f(this,r,"f")[n].content=t.element,e}e.E("element","HTMLElement",t.element)}return null}"delete"(e){for(let t=0;t<f(this,r,"f").length;t++)if(f(this,r,"f")[t].id===e){let e=f(this,r,"f")[t].content;return f(this,r,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<f(this,r,"f").length;t++)if(f(this,r,"f")[t].id===e)return f(this,r,"f")[t].content;return null}existsTUID(e){for(let t=0;t<f(this,r,"f").length;t++)if(f(this,r,"f")[t].id===e)return!0;return!1}existsElement(e){for(let t=0;t<f(this,r,"f").length;t++)if(f(this,r,"f")[t].content.isEqualNode(e))return f(this,r,"f")[t].id;return null}getTemplates(){return f(this,r,"f")}getInstance(e){}}n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,t=new WeakSet,s=function(e){for(let t=0;t<f(this,r,"f").length;t++)if(f(this,r,"f")[t].id===e)return f(this,r,"f")[t];return null};var c,u,m,w,p,v=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},g=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class E{constructor(e){c.set(this,void 0),u.set(this,[]),m.set(this,[]),w.set(this,void 0),p.set(this,((e,t)=>{})),v(this,c,e,"f"),v(this,w,new MutationObserver(g(this,p,"f")),"f"),g(this,w,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(){}}c=new WeakMap,u=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap;var b,y=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},T=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class D{constructor(e){b.set(this,void 0),y(this,b,e,"f"),this.template=new h(T(this,b,"f")),this.dataFlow=new E(T(this,b,"f"))}repeat(t){return e.repeat(t.item,t.count)}render(t){return e.render(t.HTML,t.element,t.insertAfter,t.append,t.disableDF)}e(e){let t=document.querySelectorAll(e);return t.length?1==t.length&&e.match(/^.*#[^\s]*$/)?t[0]:Array.from(t):[]}hatch(t){return e.hatch(t.element,t.remove)}getOptions(){return T(this,b,"f")}}b=new WeakMap,e.constantize(D);window.Dynamic=D})();