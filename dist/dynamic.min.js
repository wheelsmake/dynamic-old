(()=>{"use strict";function e(e,t,n){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a ${t}`:"is invalid"}${n?`, received ${n}`:""}.`)}function t(e){throw new Error(e)}function n(t){const n=document.createElement("div");var r=[];n.innerHTML=t,""!==t&&"string"==typeof t||e("HTML","string",t);for(let e=0;e<n.childNodes.length;e++)r[e]=n.childNodes[e];return r}function r(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t}const i={E:e,EE:t,toHTML:n,toHTMLString:function(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML},getInnerNodes:function(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t},repeat:function(t,n){("number"!=typeof n||n<1)&&e("count","number smaller than 1",n);var r=[];return r[n-1]=" ",r.fill(t,0,n)},randoma2z029:r,checkTUID:function(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&(t=!1),t},generateTUID:function(){return`${r(11)}-${r(17)}`},constantize:function I(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&I(e[Object.keys(e)[t]])},render:function(e,r,i,o,s){null===r.parentElement&&t("cannot render by '<html>' element, since it's root of document.");var a=[];if("string"==typeof e)a=n(e);else if(e instanceof HTMLElement||e instanceof Node)a[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let t=0;t<e.length;t++)a[t]=e.item(t).cloneNode(!0);else a=e;const l=[...a].reverse(),f=r.parentElement;if(!0===o)for(let t=0;t<a.length;t++)r.append(a[t]);else if(!1===o)for(let t=0;t<l.length;t++)r.prepend(l[t]);else if(!0===i)if(r.nextSibling)for(let t=0;t<l.length;t++)f.insertBefore(l[t],r.nextSibling);else for(let t=0;t<l.length;t++)f.append(l[t]);else if(!1===i)for(let t=0;t<a.length;t++)f.insertBefore(a[t],r);else for(let t=0;t<a.length;t++)r.append(a[t]);return a},generateDFID:function(){return`dfid-${r(24)}`},hatch:function(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let i=0;i<r.length;i++)n.insertBefore(r[i],e);return!0===t&&e.remove(),r}},o=i;var s,a,l,f,c,d,u=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},h=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class m{constructor(e){s.set(this,void 0),a.set(this,[]),l.set(this,[]),f.set(this,void 0),c.set(this,((e,t)=>{for(let n=0;n<e.length;n++)for(let t=0;t<e[n].addedNodes.length;t++){const r=e[n].addedNodes[t];if(!(r instanceof HTMLElement))return;r instanceof HTMLTemplateElement&&null===r.getAttribute("nodynamic")&&h(this,d,"f").call(this,r),this.getContent(r.tagName.toLowerCase())&&(this.render({tuID:r.tagName.toLowerCase(),element:r}),o.hatch(r,!0))}})),d.set(this,(e=>{if(e===undefined){const e=document.querySelectorAll("template");for(let n=0;n<e.length;n++){if(null===e[n].getAttribute("nodynamic"))(t=e[n].getAttribute("tuid"))&&o.checkTUID(t)||(t=o.generateTUID()),this.register({element:e[n],tuID:t,remove:null!==e[n].getAttribute("dynamic")})}}else{var t;(t=e.getAttribute("tuid"))&&o.checkTUID(t)||(t=o.generateTUID()),this.register({element:e,tuID:t,remove:null!==e.getAttribute("dynamic")})}})),u(this,s,e,"f"),h(this,d,"f").call(this),u(this,f,new MutationObserver(h(this,c,"f")),"f"),h(this,f,"f").observe(document.body,{childList:!0,subtree:!0})}register(e){if(e.tuID===undefined||o.checkTUID(e.tuID)?e.tuID===undefined&&(e.tuID=o.generateTUID()):o.E("tuID","string with some limitations",`${e.tuID}, read the documentation for help`),this.existsTUID(e.tuID)&&o.E("tuID","non-repetitive string",e.tuID),e.element instanceof HTMLTemplateElement){var t=document.createElement("div");for(let n=0;n<e.element.content.childNodes.length;n++)t.appendChild(e.element.content.childNodes[n].cloneNode(!0));var n={id:e.tuID,content:t}}else n={id:e.tuID,content:e.element.cloneNode(!0)};return h(this,a,"f").push(n),!0===e.remove&&e.element.remove(),e.tuID}render(e){for(let n=0;n<h(this,a,"f").length;n++)if(h(this,a,"f")[n].id===e.tuID){const r=h(this,a,"f")[n].content;var t=[];return!0===e.removeOuterElement?t=o.getInnerNodes(r):t[0]=r.cloneNode(!0),o.render(t,e.element,e.insertAfter,e.append,e.disableDF)}return o.E("tuID","valid ID that exists",e.tuID),null}update(e){for(let n=0;n<h(this,a,"f").length;n++)if(h(this,a,"f")[n].id===e.tuID){if(e.element instanceof HTMLElement){var t=h(this,a,"f")[n].content;return h(this,a,"f")[n].content=e.element,t}o.E("element","HTMLElement",e.element)}return null}"delete"(e){for(let t=0;t<h(this,a,"f").length;t++)if(h(this,a,"f")[t].id===e){let e=h(this,a,"f")[t].content;return h(this,a,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<h(this,a,"f").length;t++)if(h(this,a,"f")[t].id===e)return h(this,a,"f")[t].content;return null}existsTUID(e){for(let t=0;t<h(this,a,"f").length;t++)if(h(this,a,"f")[t].id===e)return!0;return!1}existsElement(e){for(let t=0;t<h(this,a,"f").length;t++)if(h(this,a,"f")[t].content.isEqualNode(e))return h(this,a,"f")[t].id;return null}getTemplates(){return h(this,a,"f")}getInstance(e){}}s=new WeakMap,a=new WeakMap,l=new WeakMap,f=new WeakMap,c=new WeakMap,d=new WeakMap;var p,w,g,v,b,T=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},D=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class E{constructor(e){p.set(this,void 0),w.set(this,[]),g.set(this,[]),v.set(this,void 0),b.set(this,((e,t)=>{})),T(this,p,e,"f"),T(this,v,new MutationObserver(D(this,b,"f")),"f"),D(this,v,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(){}}p=new WeakMap,w=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap;class y{constructor(e){this.options=undefined,this.options=e,this.template=new m(this),this.dataFlow=new E(this)}repeat(e){return o.repeat(e.item,e.count)}render(e){return o.render(e.HTML,e.element,e.insertAfter,e.append,e.disableDF)}e(e){let t=document.querySelectorAll(e);return t.length?1==t.length&&e.match(/^.*#[^\s]*$/)?t[0]:Array.from(t):[]}hatch(e){return o.hatch(e.element,e.remove)}}o.constantize(y);window.Dynamic=y})();