(()=>{"use strict";const e={e(e,t){t!==undefined&&t instanceof HTMLElement||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]},E(e,t,n){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a ${t}`:"is invalid"}${n?`, got ${n}`:""}.`)},EE(e){throw new Error(e)},toHTML(e){""!==e&&"string"==typeof e||this.E("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,this.getInnerNodes(t)},getInnerNodes(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t},repeat(e,t){("number"!=typeof t||t<1)&&this.E("count","number smaller than 1",t);var n=[];return n[t-1]=" ",n.fill(e,0,t)},randoma2z029(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t},checkTUID(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&this.EE(`The specified tuID is one of the preserved element names: ${e}. See https://html.spec.whatwg.org/#valid-custom-element-name for help.`),t},generateTUID(){return`${this.randoma2z029(11)}-${this.randoma2z029(17)}`},constantize(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&this.constantize(e[Object.keys(e)[t]])},render(e,t,n,r,i){null===t.parentElement&&this.EE("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=this.toHTML(e);else if(e instanceof HTMLElement||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let l=0;l<e.length;l++)o[l]=e.item(l).cloneNode(!0);else o=e;const s=[...o].reverse(),a=t.parentElement;if(!0===r)for(let l=0;l<o.length;l++)t.append(o[l]);else if(!1===r)for(let l=0;l<s.length;l++)t.prepend(s[l]);else if(!0===n)if(t.nextSibling)for(let l=0;l<s.length;l++)a.insertBefore(s[l],t.nextSibling);else for(let l=0;l<s.length;l++)a.append(s[l]);else if(!1===n)for(let l=0;l<o.length;l++)a.insertBefore(o[l],t);else for(let l=0;l<o.length;l++)t.append(o[l]);return o},generateDFID(){return`dfid-${this.randoma2z029(24)}`},checkDFID:e=>!0,hatch(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let i=0;i<r.length;i++)n.insertBefore(r[i],e);return!0===t&&e.remove(),r}};var t,n,r,i,o,s,a,l,f,h=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},d=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class c{constructor(s){t.add(this),n.set(this,void 0),r.set(this,[]),i.set(this,[]),o.set(this,void 0),a.set(this,(e=>{for(let t=0;t<d(this,r,"f").length;t++)if(d(this,r,"f")[t].id===e)return d(this,r,"f")[t];return null})),l.set(this,((t,n)=>{for(let o=0;o<t.length;o++)for(let n=0;n<t[o].addedNodes.length;n++){const s=t[o].addedNodes[n];if(!(s instanceof HTMLElement))return;if(s instanceof HTMLTemplateElement&&d(this,f,"f").call(this,s),this.getContent(s.tagName.toLowerCase())){var r=[];for(let e=0;e<s.childNodes.length;e++){const t=s.childNodes[e];t instanceof HTMLElement&&"SLOT"===t.tagName&&r.push(t)}var i={};for(let e=0;e<r.length;e++){const t=r[e].getAttribute("name");null!==t&&""!==t&&(i[t]=r[e].innerHTML)}s.innerHTML="",this.render({tuID:s.tagName.toLowerCase(),element:s,slots:i}),e.hatch(s,!0)}}})),f.set(this,(t=>{const n=t=>{if(null===t.getAttribute("nodynamic")){var n=t.getAttribute("tuid");n&&e.checkTUID(n)||(n=e.generateTUID());const r=document.createElement("div");for(let e=0;e<t.content.childNodes.length;e++)r.appendChild(t.content.childNodes[e].cloneNode(!0));null!==t.getAttribute("dynamic")&&t.remove(),this.register({element:r,tuID:n})}};if(t===undefined){const e=document.querySelectorAll("template");for(let t=0;t<e.length;t++)n(e[t])}else n(t)})),h(this,n,s,"f"),d(this,f,"f").call(this),h(this,o,new MutationObserver(d(this,l,"f")),"f"),d(this,o,"f").observe(document.body,{childList:!0,subtree:!0})}register(t){for(t.tuID===undefined||e.checkTUID(t.tuID)?t.tuID===undefined&&(t.tuID=e.generateTUID()):e.E("tuID","string with some limitations",`${t.tuID}, read the documentation for help`);this.existsTUID(t.tuID);)d(this,n,"f")&&!0===d(this,n,"f").enableAntiClash?d(this,n,"f").clashHandler!==undefined?t.tuID=d(this,n,"f").clashHandler("tuID",t,d(this,a,"f").call(this,t.tuID)):e.E("options.clashHandler","Function",d(this,n,"f").clashHandler):e.E("tuID","non-repetitive string",t.tuID);const i={id:t.tuID,content:t.element.cloneNode(!0)};return d(this,r,"f").push(i),!0===t.remove&&t.element.remove(),t.tuID}render(n){for(let o=0;o<d(this,r,"f").length;o++)if(d(this,r,"f")[o].id===n.tuID){const a=d(this,r,"f")[o].content.cloneNode(!0);a instanceof HTMLElement&&d(this,t,"m",s).call(this,a,n.slots);var i=[];return!0===n.removeOuterElement?i=e.getInnerNodes(a):i[0]=a,e.render(i,n.element,n.insertAfter,n.append,n.disableDF)}e.E("tuID","valid ID that exists",n.tuID)}update(t){for(let n=0;n<d(this,r,"f").length;n++)if(d(this,r,"f")[n].id===t.tuID){if(t.element instanceof HTMLElement){const e=d(this,r,"f")[n].content;return d(this,r,"f")[n].content=t.element,e}e.E("element","HTMLElement",t.element)}return null}"delete"(e){for(let t=0;t<d(this,r,"f").length;t++)if(d(this,r,"f")[t].id===e){let e=d(this,r,"f")[t].content;return d(this,r,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<d(this,r,"f").length;t++)if(d(this,r,"f")[t].id===e)return d(this,r,"f")[t].content;return null}existsTUID(e){for(let t=0;t<d(this,r,"f").length;t++)if(d(this,r,"f")[t].id===e)return!0;return!1}existsElement(e){for(let t=0;t<d(this,r,"f").length;t++)if(d(this,r,"f")[t].content.isEqualNode(e))return d(this,r,"f")[t].id;return null}getTemplates(){return d(this,r,"f")}getInstance(e){}}n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,f=new WeakMap,t=new WeakSet,s=function(t,n){const r=e.e("slot",t);if(n!==undefined&&0!=r.length)for(let e=0;e<r.length;e++){const t=r[e].getAttribute("name"),i=""===r[e].getAttribute("html");if(null!==t&&""!==t)for(let o in n)o===t&&(i?r[e].innerHTML=n[o]:r[e].innerText=n[o])}if(0!=r.length)for(let i=0;i<r.length;i++){const t=r[i].parentElement;e.hatch(r[i],!0),t.normalize()}};var u,m,w,p,g,v=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},E=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class T{constructor(e){u.set(this,void 0),m.set(this,[]),w.set(this,[]),p.set(this,void 0),g.set(this,((e,t)=>{})),v(this,u,e,"f"),v(this,p,new MutationObserver(E(this,g,"f")),"f"),E(this,p,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(){}}u=new WeakMap,m=new WeakMap,w=new WeakMap,p=new WeakMap,g=new WeakMap;var b,y=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},D=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class I{constructor(e){b.set(this,void 0),y(this,b,e,"f"),this.template=new c(D(this,b,"f")),this.dataFlow=new T(D(this,b,"f"))}getOptions(){return D(this,b,"f")}render(t){return e.render(t.HTML,t.element,t.insertAfter,t.append,t.disableDF)}repeat(t){return e.repeat(t.item,t.count)}e(t,n){return e.e(t,n)}toHTML(t){return e.toHTML(t)}hatch(t){return e.hatch(t.element,t.remove)}compose(){}}b=new WeakMap,e.constantize(I),window.Dynamic=I})();