(()=>{"use strict";function e(e,t,n){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a ${t}`:"is invalid"}${n?`, received ${n}`:""}.`)}function t(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t}var n={E:e,EE:function(e){throw new Error(e)},toHTML:function(t){const n=document.createElement("div");var r=[];n.innerHTML=t,""!==t&&"string"==typeof t||e("HTML","string",t);for(let e=0;e<n.childNodes.length;e++)r[e]=n.childNodes[e];return r},toHTMLString:function(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML},repeat:function(t,n){("number"!=typeof n||n<1)&&e("count","number smaller than 1",n);var r=[];return r[n-1]=" ",r.fill(t,0,n)},randoma2z029:t,checkTUID:function(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&(t=!1),t},generateTUID:function(){var e=[...t(29)];return e[11]="-",e.join("")},constantize:function T(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&T(e[Object.keys(e)[t]])}};const r=n;var i,o,a,s,l,c,f=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},d=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class h{constructor(e){i.set(this,void 0),o.set(this,[]),a.set(this,[]),s.set(this,void 0),l.set(this,((e,t)=>{for(let n=0;n<e.length;n++)for(let t=0;t<e[n].addedNodes.length;t++){const r=e[n].addedNodes[t];r instanceof HTMLTemplateElement&&null===r.getAttribute("nodynamic")&&d(this,c,"f").call(this,r)}})),c.set(this,(e=>{if(e===undefined){const e=document.querySelectorAll("template");for(let n=0;n<e.length;n++){if(null===e[n].getAttribute("nodynamic"))(t=e[n].getAttribute("tuid"))&&r.checkTUID(t)||(t=r.generateTUID()),this.register(e[n],t,null!==e[n].getAttribute("dynamic"))}}else{var t;(t=e.getAttribute("tuid"))&&r.checkTUID(t)||(t=r.generateTUID()),this.register(e,t,null!==e.getAttribute("dynamic"))}})),f(this,i,e,"f"),d(this,c,"f").call(this),f(this,s,new MutationObserver(d(this,l,"f")),"f"),d(this,s,"f").observe(document.body,{childList:!0,subtree:!0})}register(e,t,n){t===undefined||r.checkTUID(t)?t===undefined&&(t=r.generateTUID()):r.E("TUID","string with some limitations",`${t}, read the documentation for help`);var i={id:t,content:null};if(e instanceof HTMLTemplateElement){var a=document.createElement("div");for(let t=0;t<e.content.childNodes.length;t++)a.appendChild(e.content.childNodes[t].cloneNode(!0));i.content=a}else i.content=e.cloneNode(!0);return d(this,o,"f").push(i),!0===n&&e.remove(),t}render(e,t,n,r,i,o){}update(e,t){}"delete"(e){for(let t=0;t<d(this,o,"f").length;t++)if(d(this,o,"f")[t].id===e){let e=d(this,o,"f")[t].content;return d(this,o,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<d(this,o,"f").length;t++)if(d(this,o,"f")[t].id===e)return d(this,o,"f")[t].content;return null}exists(e){for(let t=0;t<d(this,o,"f").length;t++)if(d(this,o,"f")[t].content===e)return d(this,o,"f")[t].id;return null}getInstance(e){}getTemplates(){return d(this,o,"f")}}i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap;var u,m,p,w,g=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},v=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class b{constructor(e){u.set(this,void 0),m.set(this,[]),p.set(this,void 0),w.set(this,((e,t)=>{})),g(this,u,e,"f"),g(this,p,new MutationObserver(v(this,w,"f")),"f"),v(this,p,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(){}}u=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap;const y=(()=>{class e{constructor(e){this.options=undefined,e&&(this.options=e),this.template=new h(this),this.dataFlow=new b(this)}repeat(e,t){return r.repeat(e,t)}render(e,t,n,i){null===t.parentElement&&r.EE("cannot render by '<html>' element, since it's root of document.");var o=[];if("string"==typeof e)o=r.toHTML(e);else if(e instanceof HTMLElement||e instanceof Node)o[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let r=0;r<e.length;r++)o[r]=e.item(r).cloneNode(!0);else o=e;const a=[...o].reverse(),s=t.parentElement;if(!0===i)for(let r=0;r<o.length;r++)t.append(o[r]);else if(!1===i)for(let r=0;r<a.length;r++)t.prepend(a[r]);else if(!0===n)if(t.nextSibling)for(let r=0;r<a.length;r++)s.insertBefore(a[r],t.nextSibling);else for(let r=0;r<a.length;r++)s.append(a[r]);else if(!1===n)for(let r=0;r<o.length;r++)s.insertBefore(o[r],t);else for(let r=0;r<o.length;r++)t.append(o[r]);return o}e(e){let t=document.querySelectorAll(e);return t.length?1==t.length&&e.match(/^.*#[^\s]*$/)?t[0]:Array.from(t):[]}}return r.constantize(e),e})();window.Dynamic=y})();