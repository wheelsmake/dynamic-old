(()=>{"use strict";const e={e(e,t){t!==undefined&&t instanceof HTMLElement||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]},precisePop:(e,t)=>-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1),isDescendant(e,t){for(;"HTML"!=e.tagName;)if((e=e.parentNode)===t)return!0;return!1},isChild(e,t){const n=t.childNodes;for(let r=0;r<n.length;r++)if(e===n[r])return!0;return!1},E(e,t,n){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a ${t}`:"is invalid"}${n?`, got ${n}`:""}.`)},EE(e){throw new Error(e)},toHTML(e){""!==e&&"string"==typeof e||this.E("HTML","string",e);const t=document.createElement("div");return t.innerHTML=e,this.getInnerNodes(t)},getInnerNodes(e){var t=[];for(let n=0;n<e.childNodes.length;n++)t[n]=e.childNodes[n].cloneNode(!0);return t},repeat(e,t){("number"!=typeof t||t<1)&&this.E("count","number smaller than 1",t);var n=[];return n[t-1]=" ",n.fill(e,0,t)},randoma2z029(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(36*Math.random());t+=e<10?e:String.fromCharCode(e+87)}return t},checkTUID(e){var t=!!e.match("^[a-z0-9][a-z0-9-]+[a-z0-9]$");return-1!=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].indexOf(e)&&this.EE(`The specified tuID is one of the preserved element names: ${e}. See https://html.spec.whatwg.org/#valid-custom-element-name for help.`),t},generateTUID(){return`${this.randoma2z029(11)}-${this.randoma2z029(17)}`},constantize(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&this.constantize(e[Object.keys(e)[t]])},render(e,t,n,r,i){null===t.parentElement&&this.EE("cannot render by '<html>' element, since it's root of document.");var s=[];if("string"==typeof e)s=this.toHTML(e);else if(e instanceof HTMLElement||e instanceof Node)s[0]=e.cloneNode(!0);else if(e instanceof HTMLCollection||e instanceof NodeList)for(let l=0;l<e.length;l++)s[l]=e.item(l).cloneNode(!0);else s=e;const o=[...s].reverse(),a=t.parentElement;if(!0===r)for(let l=0;l<s.length;l++)t.append(s[l]);else if(!1===r)for(let l=0;l<o.length;l++)t.prepend(o[l]);else if(!0===n)if(t.nextSibling)for(let l=0;l<o.length;l++)a.insertBefore(o[l],t.nextSibling);else for(let l=0;l<o.length;l++)a.append(o[l]);else if(!1===n)for(let l=0;l<s.length;l++)a.insertBefore(s[l],t);else for(let l=0;l<s.length;l++)t.append(s[l]);return s},generateDFID(){return`dfid-${this.randoma2z029(24)}`},checkDFID:e=>!0,hatch(e,t){const n=e.parentElement,r=Array.from(e.childNodes);for(let i=0;i<r.length;i++)n.insertBefore(r[i],e);return!0===t&&e.remove(),r}};var t,n,r,i,s,o,a,l,f=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},h=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class d{constructor(d){t.set(this,void 0),n.set(this,[]),r.set(this,[]),i.set(this,void 0),s.set(this,((t,n)=>{const r=e.e("slot",t);if(n!==undefined&&0!=r.length)for(let e=0;e<r.length;e++){const t=r[e].getAttribute("name"),i=""===r[e].getAttribute("html");if(null!==t&&""!==t)for(let s in n)if(s===t){const t=n[s];if(t===undefined)continue;i?r[e].innerHTML=t:r[e].innerText=t}}if(0!=r.length)for(let i=0;i<r.length;i++){const t=r[i].parentElement;e.hatch(r[i],!0),t.normalize()}})),o.set(this,(e=>{for(let t=0;t<h(this,n,"f").length;t++)if(h(this,n,"f")[t].id===e)return h(this,n,"f")[t];return null})),a.set(this,((t,n)=>{for(let s=0;s<t.length;s++)for(let n=0;n<t[s].addedNodes.length;n++){const o=t[s].addedNodes[n];if(!(o instanceof HTMLElement))return;if(o instanceof HTMLTemplateElement&&h(this,l,"f").call(this,o),this.getContent(o.tagName.toLowerCase())){var r=[];for(let e=0;e<o.childNodes.length;e++){const t=o.childNodes[e];t instanceof HTMLElement&&"SLOT"===t.tagName&&r.push(t)}var i={};for(let e=0;e<r.length;e++){const t=r[e].getAttribute("name");null!==t&&""!==t&&(i[t]=r[e].innerHTML)}o.innerHTML="",this.render({tuID:o.tagName.toLowerCase(),element:o,slots:i}),e.hatch(o,!0)}}})),l.set(this,(t=>{const n=t=>{if(null===t.getAttribute("nodynamic")){var n=t.getAttribute("tuid");n&&e.checkTUID(n)||(n=e.generateTUID());const r=document.createElement("div"),i=e.getInnerNodes(t.content);for(let e=0;e<i.length;e++)r.appendChild(i[e]);null!==t.getAttribute("dynamic")&&t.remove(),this.register({element:r,tuID:n,remove:!0})}};if(t===undefined){const e=document.querySelectorAll("template");for(let t=0;t<e.length;t++)n(e[t])}else n(t)})),f(this,t,d,"f"),h(this,l,"f").call(this),f(this,i,new MutationObserver(h(this,a,"f")),"f"),h(this,i,"f").observe(document.body,{childList:!0,subtree:!0})}register(r){for(r.tuID===undefined||e.checkTUID(r.tuID)?r.tuID===undefined&&(r.tuID=e.generateTUID()):e.E("tuID","string with some limitations",`${r.tuID}, read the documentation for help`);this.existsTUID(r.tuID);)h(this,t,"f")&&!0===h(this,t,"f").enableAntiClash?h(this,t,"f").clashHandler!==undefined?r.tuID=h(this,t,"f").clashHandler("tuID",r,h(this,o,"f").call(this,r.tuID)):e.E("options.clashHandler","Function",h(this,t,"f").clashHandler):e.E("tuID","non-repetitive string",r.tuID);const i={id:r.tuID,content:r.element.cloneNode(!0)};return h(this,n,"f").push(i),!0===r.remove&&r.element.remove(),r.tuID}render(t){for(let i=0;i<h(this,n,"f").length;i++)if(h(this,n,"f")[i].id===t.tuID){const o=h(this,n,"f")[i].content.cloneNode(!0);o instanceof HTMLElement&&h(this,s,"f").call(this,o,t.slots);var r=[];return!0===t.removeOuterElement?r=e.getInnerNodes(o):r[0]=o,e.render(r,t.element,t.insertAfter,t.append,t.disableDF)}e.E("tuID","valid ID that exists",t.tuID)}update(t){for(let r=0;r<h(this,n,"f").length;r++)if(h(this,n,"f")[r].id===t.tuID){if(t.element instanceof HTMLElement){const e=h(this,n,"f")[r].content;return h(this,n,"f")[r].content=t.element,e}e.E("element","HTMLElement",t.element)}return null}"delete"(e){for(let t=0;t<h(this,n,"f").length;t++)if(h(this,n,"f")[t].id===e){let e=h(this,n,"f")[t].content;return h(this,n,"f").splice(t,1),e}return null}getContent(e){for(let t=0;t<h(this,n,"f").length;t++)if(h(this,n,"f")[t].id===e)return h(this,n,"f")[t].content;return null}existsTUID(e){for(let t=0;t<h(this,n,"f").length;t++)if(h(this,n,"f")[t].id===e)return!0;return!1}existsElement(e){for(let t=0;t<h(this,n,"f").length;t++)if(h(this,n,"f")[t].content.isEqualNode(e))return h(this,n,"f")[t].id;return null}getTemplates(){return h(this,n,"f")}getInstance(e){}}t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap;var c,u,m,p,w,g,v=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},E=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class T{constructor(e,t){c.set(this,void 0),u.set(this,[]),m.set(this,[]),p.set(this,void 0),w.set(this,{}),g.set(this,((e,t)=>{})),v(this,c,e,"f"),v(this,w,t,"f"),v(this,p,new MutationObserver(E(this,g,"f")),"f"),E(this,p,"f").observe(document.body,{childList:!0,subtree:!0})}"new"(t){for(let n=0;n<E(this,u,"f").length;n++)if(e.isDescendant(t,E(this,u,"f")[n])||t===E(this,u,"f")[n])return;for(let n=0;n<E(this,u,"f").length;n++)e.isDescendant(E(this,u,"f")[n],t)&&e.precisePop(E(this,u,"f")[n],E(this,u,"f"));E(this,u,"f").push(t)}createDataNode(){}connect(e,t){}}c=new WeakMap,u=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,g=new WeakMap;var b,D=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},y=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class M{constructor(e){b.set(this,void 0),this._={},D(this,b,e,"f"),this.template=new d(y(this,b,"f")),this.dataFlow=new T(y(this,b,"f"),this._)}getOptions(){return y(this,b,"f")}render(t){return e.render(t.HTML,t.element,t.insertAfter,t.append,t.disableDF)}repeat(t){return e.repeat(t.item,t.count)}e(t,n){return e.e(t,n)}toHTML(t){return e.toHTML(t)}hatch(t){return e.hatch(t.element,t.remove)}compose(){}n(){return this.dataFlow.createDataNode()}}b=new WeakMap,e.constantize(M),window.Dynamic=M})();