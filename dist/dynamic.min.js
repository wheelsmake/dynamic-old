(()=>{"use strict";function e(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function t(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)[0]}function n(e,t,n,r){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`)}function r(e){throw new Error(e)}function o(e,t){const o="args",s="DNCreateArgs",i=" is invalid";if("name"in t)if("methods"in t&&"object"!=typeof t.methods)n(o,s,t,`args.methods${i}`);else switch(e){case"s":"fetch"in t&&"function"==typeof t.fetch?(!("frequency"in t)||"number"!=typeof t.frequency||t.frequency<0)&&n(o,`s${s}`,t,`args.frequency${i}`):n(o,`s${s}`,t,`args.fetch${i}`);break;case"t":"frequency"in t&&("number"!=typeof t.frequency||t.frequency<0)&&n(o,`t${s}`,t,`args.frequency${i}`);break;case"e":"export"in t&&"function"==typeof t["export"]||n(o,`e${s}`,t,`args.export${i}`);break;default:r("?")}else n(o,s,t,`args.name${i}`)}function s(e,t,o){const s=a(e,o);-1!=e[1].indexOf(s)?r("Source datanodes cannot be connected."):-1!=t.nexts.indexOf(s)?n("target",undefined,o,"duplicated next nodes"):(t.nexts.push(s),s.prevs.push(t))}function i(e,o,s){const i=a(e,s);-1!=e[1].indexOf(i)?r("Source datanodes cannot be connected, thus wont be disconnected."):-1==o.nexts.indexOf(i)?n("target",undefined,s,"cannot find it as next nodes"):(t(i,o.nexts),t(o,i.prevs))}function c(e,t,n){a(e,n);return!1}function f(e,t,n){a(e,n);return!1}function a(e,t){if("object"==typeof t){if(-1!=e[0].indexOf(t))return t;n("target",undefined,t,"cannot find this datanode")}else if("string"==typeof t){for(let n=0;n<e[0].length;n++)if(e[0][n].name===t)return e[0][n];n("target",undefined,t,"cannot find this datanode")}else n("target","string | nextDN",t)}var u,d,h,l,m,p,y,g=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},b=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const w="DEV"in window&&!0===window.DEV,x=["cannot find this datanode","DNcreateArgs | string","BLOCKED IN NON-DEV MODE"];class v{constructor(t){u.add(this),d.set(this,void 0),h.set(this,[]),l.set(this,[]),m.set(this,[]),p.set(this,[]),g(this,d,function(t){if(t instanceof Element)return t;if("string"==typeof t){const r=e(t);if(r instanceof Node)return r;n("rootNode","string | Element",t,"rootNode should be a VALID #id selector")}else n("rootNode","string | Element",t,"rootNode should be a #id selector or an Element")}(t),"f"),b(this,u,"m",y).call(this,b(this,d,"f"))}get rootNode(){return b(this,d,"f")}__DEV__getPrivateFields__(){return w?{rootNode:b(this,d,"f"),sourceDNs:b(this,h,"f"),transDNs:b(this,l,"f"),exportDNs:b(this,m,"f"),DNs:b(this,p,"f")}:x[2]}sourceDN(e){const t=b(this,p,"f"),r=b(this,h,"f"),c=b(this,l,"f"),a=b(this,m,"f");var u;if("object"==typeof e){const n=function(e){return o("s",e),{name:e.name,methods:"methods"in e?e.methods:{},fetch:e.fetch,value:undefined,frequency:e.frequency,nexts:[]}}(e);r.push(n),t.push(n),u=n}else{for(let t=0;t<r.length;t++)r[t].name===e&&(u=r[t]);u===undefined&&n("args",`s${x[1]}`,e,x[0])}return{connectTo:e=>s([t,r,c,a],u,e),disconnectTo:e=>i([t,r,c,a],u,e),existsNext:e=>f([t,r,c,a],0,e),get frequency(){return u.frequency},set frequency(e){"number"!=typeof e?n("frequency","number",e):u.frequency=e},get value(){return w?u.value:x[2]}}}transDN(e){const t=b(this,p,"f"),r=b(this,h,"f"),a=b(this,l,"f"),u=b(this,m,"f");var d;if("object"==typeof e){const n=function(e){o("t",e);const t={};return t.name=e.name,t.methods="methods"in e?e.methods:{},"frequency"in e&&(t.frequency=e.frequency),t.get="get"in e?e.get:function(){return this.value},t.set="set"in e?e.set:function(e){this.value=e},t.prevs=[],t.nexts=[],t}(e);a.push(n),t.push(n),d=n}else{for(let t=0;t<a.length;t++)a[t].name===e&&(d=a[t]);d===undefined&&n("args",`t${x[1]}`,e,x[0])}const y={connectTo:e=>s([t,r,a,u],d,e),disconnectTo:e=>i([t,r,a,u],d,e),connectFrom(e){},disconnectFrom(e){},existsPrev:e=>c([t,r,a,u],0,e),existsNext:e=>f([t,r,a,u],0,e)};return"frequency"in d?(Object.defineProperty(d,"frequency",{configurable:!1,enumerable:!0,get:()=>d.frequency,set(e){"number"!=typeof e?n("frequency","number",e):d.frequency=e}}),Object.defineProperty(d,"value",{configurable:!1,enumerable:!0,get:()=>d.value}),y):y}exportDN(e){const t=b(this,p,"f"),r=b(this,h,"f"),s=b(this,l,"f"),i=b(this,m,"f");var f;if("object"==typeof e){const n=function(e){return o("e",e),{name:e.name,methods:"methods"in e?e.methods:{},"export":e["export"],prevs:[]}}(e);i.push(n),t.push(n),f=n}else{for(let t=0;t<i.length;t++)i[t].name===e&&(f=i[t]);f===undefined&&n("args",`e${x[1]}`,e,x[0])}return{connectFrom(e){},disconnectFrom(e){},existsPrev:e=>c([t,r,s,i],0,e)}}}d=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,u=new WeakSet,y=function(e){if(e.textContent){e.textContent.match(/^__[^:]+__$/),e.textContent.match(/^--[^:]+--$/);const t=e.textContent.match(/^::[^:]+::$/);t&&this.exportDN({name:t[0].substring(2,t[0].length-2),methods:{},"export"(t){e.textContent=Object.prototype.toString.call(this.value)}})}const t=e.attributes;for(let n=0;n<t.length;n++);for(let n=0;n<e.childNodes.length;n++);},function N(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&N(e[Object.keys(e)[t]])}(v);const q=v;Object.defineProperty(window,"Dynamic",{configurable:!1,writable:!1,enumerable:!0,value:q})})();
//# sourceMappingURL=dynamic.min.js.map